<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Socket IO Private Chat Messaging</title>
    <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Open+Sans'>
	<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.min.css'>
	<link href="https://wmuza.github.io/SocketIO-Chat-App/public/css/normalize.css" rel="stylesheet" type="text/css">
    <link href="https://wmuza.github.io/SocketIO-Chat-App/public/css/style.css" rel="stylesheet" type="text/css">
  </head>

  <body>

		<style>
		
			/*********************************************
		
			Containers CSS
		
			***********************************************/
			
			.hidden {
				display:none !important;
			}
			.hidden.active {
				display:flex !important;
				animation: fade-in-left 300ms ease forwards;
			}
		
			#call, #wait, #form-chatssistant {
				position:absolute;
			}
		
			#chatssistant {
				box-shadow:0px 5px 10px 0px #927642 !important;
				grid-column: 4 / 4;
				grid-row: 2;
				position:absolute;
				width:50px;
				height:50px;
				background-size: cover;
				background-position: bottom;
				background-image:url('https://test.cabinetlaclef.com/test_cabinetlaclef/wp-content/uploads/2024/01/WhatsApp-Image-2023-06-06-at-18.20.40-removebg-preview-q7kly6o1y8ru6f0wvgfbt9etz450sayhs135kha3og.png');
			}
			.ctn-chatssistant {
				position:fixed;
				right:1vw;
				bottom:12vh;
				display: grid;
				grid-template-columns: repeat(4, 1fr);
				grid-gap: 10px;
				grid-auto-rows: minmax(100px, 300px);
				width:250px;
				z-index:10000;
			}
		
			.bounce2 {
			  animation: bounce2 4s ease-in-out infinite;
			}
		
			/*********************************************
		
			Bubbles CSS
		
			***********************************************/
		
			#bubbles {
				grid-column: 5 / 1;
				grid-row: 1;
				position:relative;
				top:-15px;
			}
		
			.thought {
		
				background-color:#fff;
				padding:20px;
				border-radius:30px;
				min-width:250px;
				max-width:350px;
				min-height:40px;
				align-items:center;
				justify-content:center;
				text-align:center;
				transition: all 300ms ease-in-out;
				}
			
			.thought:before, .thought:after {
				content:"";
				background-color:#fff;
				border-radius:50%;
				display:block;
				position:absolute;
				z-index:-1;
			}
		
			.thought:after {
			bottom:-10px;
			right:26px;
			width:30px;
			height:30px;  
			}
		
		
		
			/*********************************************
		
			Slider CSS
		
			***********************************************/
		
			.slider-ctn {
				max-width: 1270px;
				max-height: 800px;
				align-items: center;
				justify-content: center;
			}
		
			.slider-inner {
				display:flex;
				align-items: center;
				justify-content: flex-start;	
				transition: transform 0.7s ease-in-out;
				max-width: inherit;
				max-height: inherit;
				padding:10px;
			}
		
			.slider-img {
				max-width: 100%;
				max-height: inherit;
			}
		
			@keyframes bounce2 {
				0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
				40% {transform: translateY(-10px);}
				60% {transform: translateY(-5px);}
			}
		
			@keyframes fade-in-left {
				0% {
					opacity: 0;
					transform: translateX(-20px);
				}
				100% {
					opacity: 1;
					transform: translateX(0);
				}
		  
			}
		
			@keyframes fade-out-right {
				0% {
					opacity: 1;
					transform: translateX(0);
				}
				100% {
					opacity: 0;
					transform: translateX(20px);
				}
			}
		</style>
		
		<div class="container ctn-chatssistant">
			<div id="bubbles" class="d-flex align-items-end justify-content-end">
				<div id='call' class="thought hidden shadow"> Miaou internaute ! Par ici ! </div>
				<div id='wait' class="thought hidden shadow bubbles"> D'accord ! Je suis l√† au besoin </div>
				<form id="form-chatssistant" target="_blank" action="https://confirm.cabinetlaclef.com" method="post" class="thought hidden shadow slider-ctn bubbles">
					<div class="slider-inner">
						<div class="chat">
						<div class="messages">
							<div class="messages-content"></div>
						</div>
						<div class="message-box">
							<textarea type="text" class="message-input" placeholder="Type message..."></textarea>
							<button type="submit" class="message-submit">Send</button>
						</div>

		
					</div>
					</div>
					
				</form>
			</div>
			<button id="chatssistant" onclick="formReset()" class="shadow-sm btn btn-light rounded-circle bounce2"></button>
		
		</div>
		
		<script>
		
			function handleToggle(arr) {
				arr.forEach(e => document.querySelector(e).classList.toggle('active'))
				}
				
			function bubbleCheck(selector) {
		
					let check = false;
		
					document.querySelectorAll(selector).forEach(e => {
						if (e.classList.contains('active')) {
							check = true;
						}
					})
					return check;
				}
		
			function formReset() {
		
				document.querySelectorAll('.slider-img').forEach((e, index) => index !== 0 ? e.classList.remove('active') : 			e.classList.add('active'))
		
				bubbleCheck('#call') && handleToggle(['#call'])
		
				if(!bubbleCheck('#form-chatssistant') ) {
					handleToggle(['#form-chatssistant'])
				} else {
					handleToggle(['#form-chatssistant', '#wait'])
					setTimeout(() => {handleToggle(['#wait'])}, 3000)
				}
		
			}
			
			function checkCheckBoxes(selector) {
				
				let checked = false;
				let elt = document.querySelectorAll(selector);
				
				elt.forEach(e => {
					if(e.checked) {
						checked = true
					}
				})
				return checked;
			}
			
			function promiseCheckBoxes(selector) {
				return new Promise ((res, rej) => {
					!checkCheckBoxes(selector) ? res(true) : rej(false)
				})
			}
				
			function promiseSelect(selector) {
				
				let elt = document.querySelector(selector)
				return new Promise ((resolve, reject) => {
				elt.value === '' ? resolve(true) : reject(false)
					
				})
				
			}
		
			function resolvePromise({
				call : call,
				promiseSelector : promiseSelector,
				feedBackSelector : feedBackSelector = promiseSelector,
				handleToggle : array
			}) {
				call(promiseSelector)
					.then((result) => {
						document.querySelector(feedBackSelector).classList.add('is-invalid')
					})
					.catch((error) => {
						handleToggle(array)
					})
			}
		
			window.addEventListener('load', () => {
		
				setInterval(() => {
					if(!bubbleCheck('.bubbles')) {
						$('#call').toggleClass('active');
						setTimeout(() => {
							 $('#call').toggleClass('active'); 
						}, 3000)	
					}
				}, 10000);
		
			})
		</script>
		
		
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.concat.min.js'></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
	<script src="https://wmuza.github.io/SocketIO-Chat-App/public/js/index.js"></script>     
  </body>
</html>
